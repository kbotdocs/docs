---
title: Ubuntu에 설치하기
category: 자습서
---

<Section>
  Ubuntu는 데스크톱과 서버 환경 모두에서 널리 사용되는 Linux 배포판입니다. 이 자습서에서는 Ubuntu에 Iris를 설치하는 방법을 안내합니다.
</Section>
<Section>
  Ubuntu에서 Iris를 구동하기 위해 docker를 사용합니다. docker의 컨테이너에 [redroid](#blank#https://github.com/remote-android/redroid-doc)를 설치합니다. 
  redroid는 안드로이드 오픈소스 프로젝트(AOSP)를 기반으로 한 안드로이드 에뮬레이터입니다. 해당 redroid에 카카오톡을 설치해 Iris가 카카오톡과 상호작용할 수 있도록 합니다.

  <Image src="https://assets.kbotdocs.dev/learn/iris/installation/on-ubuntu/project_structure.png" />
</Section>
<Section>
  ## iris_control 설치

  Ubuntu에 Iris를 설치하기 위해 `iris_control`을 설치합니다. `iris_control`은 Linux 환경에서 Iris의 설치와 제어를 위한 쉘 스크립트입니다.

  [여기](#blank#https://github.com/dolidolih/Iris/releases)에서 `iris_control` 파일의 URL을 복사합니다. Ubuntu에서 아래와 같이 실행합니다.

  ```bash
  $ wget https://github.com/dolidolih/Iris/releases/download/{VERSION_NAME}/iris_control
  ```

  예를 들어, v0.27 버전을 설치할 경우 `wget https://github.com/dolidolih/Iris/releases/download/v0.27/iris_control`과 같이 실행합니다.

  아래와 같이 `iris_control`의 실행 권한을 부여합니다.

  ```bash
  $ chmod +x iris_control
  ```
</Section>
<Section>
  ## redroid 설치

  Ubuntu에서 Android 환경을 사용하기 위해 redroid를 설치합니다. Iris 구동을 위한 docker와 redroid의 설치는 `iris_control`이 제공합니다. 아래 명령을 실행합니다.

  ```bash
  $ ./iris_control install_redroid
  ```

  정상적으로 실행했을 경우 redroid가 docker 컨테이너에서 실행됩니다. 아래 명령을 통해 실행 중인 컨테이너의 리스트를 확인할 수 있습니다.

  ```bash
  $ sudo docker ps -a
  ```

  정상적으로 설치되었을 경우 `redroid` 이름의 컨테이너가 실행 중일 것입니다.
</Section>
<Section>
  ## redroid 화면 조작

  docker 컨테이너 상의 redroid에 카카오톡을 설치하고 로그인해야 합니다. 하지만 CUI 환경을 사용할 경우 카카오톡을 설치하기 쉽지 않을 수 있습니다. 
  해당 방식은 CUI 환경의 Ubuntu를 사용하는 사용자에게 특히 더 유용할 수 있습니다.

  Ubuntu 서버에서 구동 중인 redroid의 Android OS의 스크린에 직접적으로 접근하기 위해 `[scrcpy](#blank#https://github.com/Genymobile/scrcpy)` 를 사용합니다.

  <Noti type="info">
    `scrcpy`는 서버로 사용할 Ubuntu 환경에 설치하는 것이 아닙니다. redroid의 Android OS에 접근하기 위한 또다른 컴퓨터에 설치합니다.
  </Noti>

  1. [여기](#blank#https://github.com/Genymobile/scrcpy/releases)에서 본인이 사용하는 운영체제/프로세서에 맞는 파일을 설치합니다.
  2. 다운로드한 파일의 압축을 해제합니다.
  
  압축을 해제한 폴더의 경로로 터미널을 실행합니다. `adb`를 사용해 Ubuntu 서버에서 구동 중인 redroid와 연결합니다.

  <Noti type="info">
    압축 해제한 scrcpy 폴더에 `adb`가 내장되어 있으므로 `adb`를 별도로 설치할 필요는 없습니다.
  </Noti>

  ```bash
  ./adb connect [Ubuntu_서버의_IP]:5555
  ```

  예를 들어, 자신의 Ubuntu 서버의 IP가 `192.0.0.1`일 경우 `./adb connect 192.0.0.1:5555`과 같이 입력합니다.

  만약 아래와 같이 출력되었을 경우 정상적으로 연결이 된 것입니다.

  ```text
  connected to [Ubuntu_서버의_IP]:5555
  ```

  이제 `scrcpy`를 이용해 redroid의 스크린을 원격으로 조작할 수 있습니다. 아래와 같이 실행합니다.

  ```bash
  ./scrcpy -s [Ubuntu_서버의_IP]:5555
  ```
</Section>
<Section>
  ## 카카오톡 설치 및 로그인

  이제 카카오톡을 설치하고 로그인해야 합니다. 하지만 redroid로 구동 중인 Android에서는 Play 스토어가 존재하지 않습니다. 그러므로 Ubuntu 서버로 카카오톡의 APK 파일을 직접 전달해야 합니다.

  1. [여기](#blank#https://apkpure.net/kr/kakaotalk-messenger/com.kakao.talk/download)에서 arm64-v8a 버전의 `.xapk` 파일을 다운로드합니다. 
  2. 다운로드한 파일의 이름의 끝에 `.zip`을 추가합니다. 예를 들어, `~~~.xapk` 파일의 이름을 `~~~.xapk.zip`으로 변경합니다.
  3. 해당 파일을 압축 해제합니다.

  이제 scrcpy 폴더의 경로로 터미널을 실행합니다. 그리고 아래와 같이 실행합니다.

  <Tab label={["Windows", "macOS/Linux"]}>
    <TabItem>
      ```bash
      ./adb -s [Ubuntu_서버의_IP] install-multiple (Get-Item [압축_해제한_폴더의_경로]/*.apk)
      ```
    </TabItem>
    <TabItem>
      ```bash
      ./adb -s [Ubuntu_서버의_IP] install-multiple /[압축_해제한_폴더의_경로]/*.apk
      ```
    </TabItem>
  </Tab>

  실행 후 `Success` 라는 문구가 출력될 경우 redroid에 성공적으로 카카오톡이 설치된 것입니다. scrcpy를 통해 연결한 스크린을 통해 redroid에 설치된 카카오톡을 실행하고 로그인합니다.
</Section>